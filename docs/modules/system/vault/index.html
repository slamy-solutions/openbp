
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="An open-source set of services and tools that makes it easy to build, release, and operate production-ready Industry 4.0+ business solutions.">
      
      
      
        <link rel="canonical" href="https://openbp.io/docs/modules/system/vault/">
      
      
        <link rel="prev" href="../db/">
      
      
        <link rel="next" href="../nats/">
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.13">
    
    
      
        <title>Vault - Open Business Platform</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.85bb2934.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.a6bdf11c.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Red+Hat+Display:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Red Hat Display";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    





  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#system-vault-service" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      <!-- Application header -->
<header class="md-header" data-md-component="header">

  <!-- Top-level navigation -->
  <nav class="md-header__inner md-grid" aria-label="">

    <!-- Link to home -->
    <a href="https://openbp.io/" title="Open Business Platform" class="md-header__button md-logo" aria-label="Open Business Platform">
      
  
  <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 220"><defs><style>.cls-1{fill:#ffd835;}.cls-2{fill:#010101;}</style></defs><path class="cls-1" d="M245.88,39.32h-26.5A4.42,4.42,0,0,1,215,34.91V8.41A4.41,4.41,0,0,0,210.55,4H38.28L2.94,39.32V176.26a4.42,4.42,0,0,0,4.42,4.42h26.5a4.42,4.42,0,0,1,4.42,4.42v26.5A4.41,4.41,0,0,0,42.69,216H215l35.34-35.33V43.74A4.42,4.42,0,0,0,245.88,39.32ZM215,176.26a4.41,4.41,0,0,1-4.41,4.42H42.69a4.41,4.41,0,0,1-4.41-4.42V43.74a4.41,4.41,0,0,1,4.41-4.42H210.55A4.41,4.41,0,0,1,215,43.74Z"/><path class="cls-2" d="M427.77,178.74a73,73,0,0,1-28-5.31,69.94,69.94,0,0,1-37.95-37.07,67.71,67.71,0,0,1-5.5-27.33,67.7,67.7,0,0,1,5.5-27.32,70,70,0,0,1,37.95-37.08,73.17,73.17,0,0,1,28-5.31,73.92,73.92,0,0,1,28.09,5.31A70,70,0,0,1,478.65,59.5a69.48,69.48,0,0,1,0,99.07,69.68,69.68,0,0,1-22.79,14.86A73.73,73.73,0,0,1,427.77,178.74Zm0-25.68a41.84,41.84,0,0,0,17-3.38,42.86,42.86,0,0,0,13.52-9.27,42.34,42.34,0,0,0,9.07-14,47.92,47.92,0,0,0,0-34.85,42.39,42.39,0,0,0-22.59-23.17,42,42,0,0,0-17-3.38A41.44,41.44,0,0,0,411,68.39a42.45,42.45,0,0,0-22.6,23.17,45.09,45.09,0,0,0-3.28,17.28,46.32,46.32,0,0,0,3.28,17.57A42.21,42.21,0,0,0,411,149.68,41.27,41.27,0,0,0,427.77,153.06Z"/><path class="cls-2" d="M514.85,216V76h26.07v8.31a45.11,45.11,0,0,1,28.58-9.66,49.38,49.38,0,0,1,25.88,7,52.28,52.28,0,0,1,18.44,18.64,50.73,50.73,0,0,1,6.85,26.16,50.14,50.14,0,0,1-6.95,26.17,51.52,51.52,0,0,1-45,25.39,51.12,51.12,0,0,1-14.48-2,49.07,49.07,0,0,1-12.94-5.88V216Zm50.4-60.44a29.24,29.24,0,0,0,15-3.86,28.5,28.5,0,0,0,14.38-25.3,29.23,29.23,0,0,0-3.86-15A27.73,27.73,0,0,0,580.22,101a29.88,29.88,0,0,0-15-3.76,36.09,36.09,0,0,0-13.42,2.41,28.33,28.33,0,0,0-10.52,7.24v39.2a29.43,29.43,0,0,0,10.52,6.95A35.67,35.67,0,0,0,565.25,155.57Z"/><path class="cls-2" d="M684,178.55a54.45,54.45,0,0,1-27.32-7,52.57,52.57,0,0,1-19.41-18.73,50,50,0,0,1-7.14-26.46,51.36,51.36,0,0,1,25.48-45.18,50.68,50.68,0,0,1,26.27-7,46.75,46.75,0,0,1,25.68,7.14,50.74,50.74,0,0,1,17.67,19.31,57.94,57.94,0,0,1,6.47,27.61v7H657.17a30.15,30.15,0,0,0,5.7,10.81,27.13,27.13,0,0,0,9.84,7.53,29.87,29.87,0,0,0,12.65,2.7,35.31,35.31,0,0,0,12.46-2.12,28.13,28.13,0,0,0,9.75-6L725,164.07A60.4,60.4,0,0,1,684,178.55Zm-27.23-62.18h48.86a25.88,25.88,0,0,0-4.93-10.52,26.64,26.64,0,0,0-8.49-7.15,23,23,0,0,0-10.91-2.6,24.72,24.72,0,0,0-11.2,2.51,23.25,23.25,0,0,0-8.4,7A29.65,29.65,0,0,0,656.78,116.37Z"/><path class="cls-2" d="M746,176.62V76h26.45v8.31q11.4-10.23,28.2-10.24A41.17,41.17,0,0,1,821.4,79.2a36.28,36.28,0,0,1,14,14.1,42.18,42.18,0,0,1,5,21v62.37H814V118.11q0-9.85-5.6-15.54t-15.26-5.7a26.42,26.42,0,0,0-12,2.61,23.53,23.53,0,0,0-8.69,7.43v69.71Z"/><path class="cls-2" d="M854.17,93.05V39.32H880.8a23,23,0,0,1,9.71,1.92,15.77,15.77,0,0,1,6.56,5.34,13.38,13.38,0,0,1,2.38,7.86,12.23,12.23,0,0,1-1.65,6.18,15.13,15.13,0,0,1-4.49,4.88,15.72,15.72,0,0,1,5.72,5,11.66,11.66,0,0,1,2.11,6.76,14.5,14.5,0,0,1-2.38,8.25,15.78,15.78,0,0,1-6.68,5.56,23.44,23.44,0,0,1-10,2Zm13.2-32.31H880a6.81,6.81,0,0,0,4.6-1.46,4.81,4.81,0,0,0,1.69-3.84,4.76,4.76,0,0,0-1.69-3.87,6.9,6.9,0,0,0-4.6-1.42H867.37Zm0,21.49h13.74A7.22,7.22,0,0,0,886,80.69a5.65,5.65,0,0,0,0-8.29,7.27,7.27,0,0,0-4.87-1.53H867.37Z"/><path class="cls-2" d="M907.51,93.05V39.32h28.32a19.15,19.15,0,0,1,9.4,2.27,16.78,16.78,0,0,1,8.87,15.16,16.39,16.39,0,0,1-2.38,8.71,16.91,16.91,0,0,1-6.53,6.1,19.49,19.49,0,0,1-9.36,2.22H920.71V93.05Zm13.2-30.16h13.58A6.53,6.53,0,0,0,939,61.2a5.82,5.82,0,0,0,1.76-4.38A6,6,0,0,0,939,52.33a6.42,6.42,0,0,0-4.69-1.72H920.71Z"/></svg>

    </a>

    <!-- Button to open drawer -->
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>

    <!-- Header title -->
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            <!--
            Open Business Platform
            -->
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            <!--
            
              Vault
            
            -->
          </span>
        </div>
      </div>
    </div>

    <!-- Site language selector -->
    <!--
    
    <div class="md-header__option"></form>
      <div class="md-select">
        
        <button class="md-header__button md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"/></svg>
        </button>
        <div class="md-select__inner">
          <ul class="md-select__list">
            
            <li class="md-select__item">
              <a
                      href="../../../../en/"
                      hreflang="en"
                      class="md-select__link"
              >
                English
              </a>
            </li>
            
          </ul>
        </div>
      </div>
    </div>
    
    -->

    <!-- Button to open search dialogue -->
    

    <!-- Repository containing source -->
    
      <div class="md-header__source">
        <a href="https://github.com/slamy-solutions/openbp" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    slamy-solutions/openbp
  </div>
</a>
      </div>
    

    <div class="md-header__option">
      <div class="md-select">
        <a class="md-header__button md-icon" href="https://discord.gg/feV6NfNZ5b">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M524.531 69.836a1.5 1.5 0 0 0-.764-.7A485.065 485.065 0 0 0 404.081 32.03a1.816 1.816 0 0 0-1.923.91 337.461 337.461 0 0 0-14.9 30.6 447.848 447.848 0 0 0-134.426 0 309.541 309.541 0 0 0-15.135-30.6 1.89 1.89 0 0 0-1.924-.91 483.689 483.689 0 0 0-119.688 37.107 1.712 1.712 0 0 0-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016 0 0 0 .765 1.375 487.666 487.666 0 0 0 146.825 74.189 1.9 1.9 0 0 0 2.063-.676A348.2 348.2 0 0 0 208.12 430.4a1.86 1.86 0 0 0-1.019-2.588 321.173 321.173 0 0 1-45.868-21.853 1.885 1.885 0 0 1-.185-3.126 251.047 251.047 0 0 0 9.109-7.137 1.819 1.819 0 0 1 1.9-.256c96.229 43.917 200.41 43.917 295.5 0a1.812 1.812 0 0 1 1.924.233 234.533 234.533 0 0 0 9.132 7.16 1.884 1.884 0 0 1-.162 3.126 301.407 301.407 0 0 1-45.89 21.83 1.875 1.875 0 0 0-1 2.611 391.055 391.055 0 0 0 30.014 48.815 1.864 1.864 0 0 0 2.063.7A486.048 486.048 0 0 0 610.7 405.729a1.882 1.882 0 0 0 .765-1.352c12.264-126.783-20.532-236.912-86.934-334.541ZM222.491 337.58c-28.972 0-52.844-26.587-52.844-59.239s23.409-59.241 52.844-59.241c29.665 0 53.306 26.82 52.843 59.239 0 32.654-23.41 59.241-52.843 59.241Zm195.38 0c-28.971 0-52.843-26.587-52.843-59.239s23.409-59.241 52.843-59.241c29.667 0 53.307 26.82 52.844 59.239 0 32.654-23.177 59.241-52.844 59.241Z"/></svg>
        </a>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../overview.en/" class="md-tabs__link md-tabs__link--active">
        Documentation
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../../license/license.en/" class="md-tabs__link">
        License
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Open Business Platform" class="md-nav__button md-logo" aria-label="Open Business Platform" data-md-component="logo">
      
  
  <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 960 220"><defs><style>.cls-1{fill:#ffd835;}.cls-2{fill:#010101;}</style></defs><path class="cls-1" d="M245.88,39.32h-26.5A4.42,4.42,0,0,1,215,34.91V8.41A4.41,4.41,0,0,0,210.55,4H38.28L2.94,39.32V176.26a4.42,4.42,0,0,0,4.42,4.42h26.5a4.42,4.42,0,0,1,4.42,4.42v26.5A4.41,4.41,0,0,0,42.69,216H215l35.34-35.33V43.74A4.42,4.42,0,0,0,245.88,39.32ZM215,176.26a4.41,4.41,0,0,1-4.41,4.42H42.69a4.41,4.41,0,0,1-4.41-4.42V43.74a4.41,4.41,0,0,1,4.41-4.42H210.55A4.41,4.41,0,0,1,215,43.74Z"/><path class="cls-2" d="M427.77,178.74a73,73,0,0,1-28-5.31,69.94,69.94,0,0,1-37.95-37.07,67.71,67.71,0,0,1-5.5-27.33,67.7,67.7,0,0,1,5.5-27.32,70,70,0,0,1,37.95-37.08,73.17,73.17,0,0,1,28-5.31,73.92,73.92,0,0,1,28.09,5.31A70,70,0,0,1,478.65,59.5a69.48,69.48,0,0,1,0,99.07,69.68,69.68,0,0,1-22.79,14.86A73.73,73.73,0,0,1,427.77,178.74Zm0-25.68a41.84,41.84,0,0,0,17-3.38,42.86,42.86,0,0,0,13.52-9.27,42.34,42.34,0,0,0,9.07-14,47.92,47.92,0,0,0,0-34.85,42.39,42.39,0,0,0-22.59-23.17,42,42,0,0,0-17-3.38A41.44,41.44,0,0,0,411,68.39a42.45,42.45,0,0,0-22.6,23.17,45.09,45.09,0,0,0-3.28,17.28,46.32,46.32,0,0,0,3.28,17.57A42.21,42.21,0,0,0,411,149.68,41.27,41.27,0,0,0,427.77,153.06Z"/><path class="cls-2" d="M514.85,216V76h26.07v8.31a45.11,45.11,0,0,1,28.58-9.66,49.38,49.38,0,0,1,25.88,7,52.28,52.28,0,0,1,18.44,18.64,50.73,50.73,0,0,1,6.85,26.16,50.14,50.14,0,0,1-6.95,26.17,51.52,51.52,0,0,1-45,25.39,51.12,51.12,0,0,1-14.48-2,49.07,49.07,0,0,1-12.94-5.88V216Zm50.4-60.44a29.24,29.24,0,0,0,15-3.86,28.5,28.5,0,0,0,14.38-25.3,29.23,29.23,0,0,0-3.86-15A27.73,27.73,0,0,0,580.22,101a29.88,29.88,0,0,0-15-3.76,36.09,36.09,0,0,0-13.42,2.41,28.33,28.33,0,0,0-10.52,7.24v39.2a29.43,29.43,0,0,0,10.52,6.95A35.67,35.67,0,0,0,565.25,155.57Z"/><path class="cls-2" d="M684,178.55a54.45,54.45,0,0,1-27.32-7,52.57,52.57,0,0,1-19.41-18.73,50,50,0,0,1-7.14-26.46,51.36,51.36,0,0,1,25.48-45.18,50.68,50.68,0,0,1,26.27-7,46.75,46.75,0,0,1,25.68,7.14,50.74,50.74,0,0,1,17.67,19.31,57.94,57.94,0,0,1,6.47,27.61v7H657.17a30.15,30.15,0,0,0,5.7,10.81,27.13,27.13,0,0,0,9.84,7.53,29.87,29.87,0,0,0,12.65,2.7,35.31,35.31,0,0,0,12.46-2.12,28.13,28.13,0,0,0,9.75-6L725,164.07A60.4,60.4,0,0,1,684,178.55Zm-27.23-62.18h48.86a25.88,25.88,0,0,0-4.93-10.52,26.64,26.64,0,0,0-8.49-7.15,23,23,0,0,0-10.91-2.6,24.72,24.72,0,0,0-11.2,2.51,23.25,23.25,0,0,0-8.4,7A29.65,29.65,0,0,0,656.78,116.37Z"/><path class="cls-2" d="M746,176.62V76h26.45v8.31q11.4-10.23,28.2-10.24A41.17,41.17,0,0,1,821.4,79.2a36.28,36.28,0,0,1,14,14.1,42.18,42.18,0,0,1,5,21v62.37H814V118.11q0-9.85-5.6-15.54t-15.26-5.7a26.42,26.42,0,0,0-12,2.61,23.53,23.53,0,0,0-8.69,7.43v69.71Z"/><path class="cls-2" d="M854.17,93.05V39.32H880.8a23,23,0,0,1,9.71,1.92,15.77,15.77,0,0,1,6.56,5.34,13.38,13.38,0,0,1,2.38,7.86,12.23,12.23,0,0,1-1.65,6.18,15.13,15.13,0,0,1-4.49,4.88,15.72,15.72,0,0,1,5.72,5,11.66,11.66,0,0,1,2.11,6.76,14.5,14.5,0,0,1-2.38,8.25,15.78,15.78,0,0,1-6.68,5.56,23.44,23.44,0,0,1-10,2Zm13.2-32.31H880a6.81,6.81,0,0,0,4.6-1.46,4.81,4.81,0,0,0,1.69-3.84,4.76,4.76,0,0,0-1.69-3.87,6.9,6.9,0,0,0-4.6-1.42H867.37Zm0,21.49h13.74A7.22,7.22,0,0,0,886,80.69a5.65,5.65,0,0,0,0-8.29,7.27,7.27,0,0,0-4.87-1.53H867.37Z"/><path class="cls-2" d="M907.51,93.05V39.32h28.32a19.15,19.15,0,0,1,9.4,2.27,16.78,16.78,0,0,1,8.87,15.16,16.39,16.39,0,0,1-2.38,8.71,16.91,16.91,0,0,1-6.53,6.1,19.49,19.49,0,0,1-9.36,2.22H920.71V93.05Zm13.2-30.16h13.58A6.53,6.53,0,0,0,939,61.2a5.82,5.82,0,0,0,1.76-4.38A6,6,0,0,0,939,52.33a6.42,6.42,0,0,0-4.69-1.72H920.71Z"/></svg>

    </a>
    Open Business Platform
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/slamy-solutions/openbp" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    slamy-solutions/openbp
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Documentation
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Documentation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview.en/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
          Getting Started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          Getting Started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2_1" >
      
      
      
        <label class="md-nav__link" for="__nav_2_2_1" id="__nav_2_2_1_label" tabindex="0">
          Deploy for production
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_2_1_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_2_1">
          <span class="md-nav__icon md-icon"></span>
          Deploy for production
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting-started/prod/compose.en/" class="md-nav__link">
        Docker-compose
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting-started/prod/rpi.en/" class="md-nav__link">
        Raspberry Pi
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
      
      
      
        <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
          Concepts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          Concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../concepts/security/" class="md-nav__link">
        Security
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../concepts/IaC.en/" class="md-nav__link">
        IaC
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../concepts/cicd.en/" class="md-nav__link">
        GIT CI/CD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../concepts/languageYouWant.en/" class="md-nav__link">
        Use the language you want
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
          Modules
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_4">
          <span class="md-nav__icon md-icon"></span>
          Modules
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../overview.en/" class="md-nav__link">
        What is the module?
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_2" checked>
      
      
      
        <label class="md-nav__link" for="__nav_2_4_2" id="__nav_2_4_2_label" tabindex="0">
          System
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_2_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_2_4_2">
          <span class="md-nav__icon md-icon"></span>
          System
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        What is the system module?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../db/" class="md-nav__link">
        DB
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Vault
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Vault
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#seal-unseal" class="md-nav__link">
    Seal / Unseal
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-examples" class="md-nav__link">
    Usage examples
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#communication-api" class="md-nav__link">
    Communication API
  </a>
  
    <nav class="md-nav" aria-label="Communication API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#general" class="md-nav__link">
    General
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rsa" class="md-nav__link">
    RSA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hmac" class="md-nav__link">
    HMAC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encryption" class="md-nav__link">
    Encryption
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hsm" class="md-nav__link">
    HSM
  </a>
  
    <nav class="md-nav" aria-label="HSM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#softhsm2" class="md-nav__link">
    SoftHSM2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dynamic-hsm-provider" class="md-nav__link">
    Dynamic HSM provider
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nats/" class="md-nav__link">
        NATS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cache/" class="md-nav__link">
        Cache
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../redis/" class="md-nav__link">
        Redis
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3" >
      
      
      
        <label class="md-nav__link" for="__nav_2_4_3" id="__nav_2_4_3_label" tabindex="0">
          Native
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_2_4_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4_3">
          <span class="md-nav__icon md-icon"></span>
          Native
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../native/overview.en/" class="md-nav__link">
        What is the native module?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../native/namespace.en/" class="md-nav__link">
        Namespace
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../native/keyvaluestorage.en/" class="md-nav__link">
        KeyValueStorage
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_4" >
      
      
      
        <label class="md-nav__link" for="__nav_2_4_3_4" id="__nav_2_4_3_4_label" tabindex="0">
          IAM
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_2_4_3_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4_3_4">
          <span class="md-nav__icon md-icon"></span>
          IAM
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../native/iam/iam.en/" class="md-nav__link">
        What is IAM?
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../native/iam/policy.en/" class="md-nav__link">
        Policy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../native/iam/identity.en/" class="md-nav__link">
        Identity
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../native/iam/token.en/" class="md-nav__link">
        Token
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../native/iam/auth.en/" class="md-nav__link">
        Auth
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_4_6" >
      
      
      
        <label class="md-nav__link" for="__nav_2_4_3_4_6" id="__nav_2_4_3_4_6_label" tabindex="0">
          Authentication
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_4_3_4_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4_3_4_6">
          <span class="md-nav__icon md-icon"></span>
          Authentication
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../native/iam/authentication/password.en.md" class="md-nav__link">
        Password
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4_3_4_7" >
      
      
      
        <label class="md-nav__link" for="__nav_2_4_3_4_7" id="__nav_2_4_3_4_7_label" tabindex="0">
          Actor
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="5" aria-labelledby="__nav_2_4_3_4_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2_4_3_4_7">
          <span class="md-nav__icon md-icon"></span>
          Actor
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../native/iam/actor/user.en.md" class="md-nav__link">
        User
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          License
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          License
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../license/license.en/" class="md-nav__link">
        License information
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../license/faq.en/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../license/acknowledgements.en/" class="md-nav__link">
        Acknowledgements
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#seal-unseal" class="md-nav__link">
    Seal / Unseal
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-examples" class="md-nav__link">
    Usage examples
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#communication-api" class="md-nav__link">
    Communication API
  </a>
  
    <nav class="md-nav" aria-label="Communication API">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#general" class="md-nav__link">
    General
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rsa" class="md-nav__link">
    RSA
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hmac" class="md-nav__link">
    HMAC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#encryption" class="md-nav__link">
    Encryption
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hsm" class="md-nav__link">
    HSM
  </a>
  
    <nav class="md-nav" aria-label="HSM">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#softhsm2" class="md-nav__link">
    SoftHSM2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dynamic-hsm-provider" class="md-nav__link">
    Dynamic HSM provider
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="system-vault-service">System vault service</h1>
<p>The <code>system_vault</code> service is a crucial component responsible for robust security management within the OpenBP system. Its primary function is to establish communication with the Hardware Security Module (<strong><em>HSM</em></strong>) through <strong><em>PKCS</em></strong> interfaces. It offers a user-friendly API that enables seamless integration with other services.</p>
<p>By leveraging the capabilities of the <strong><em>HSM</em></strong> and implementing <strong><em>PKCS</em></strong> interfaces, the <code>system_vault</code> service ensures a high level of security for managing critical information within the OpenBP system. Its user-friendly API further facilitates seamless interaction with other services, making it an essential component for secure and efficient operations.</p>
<h2 id="seal-unseal">Seal / Unseal</h2>
<p>Upon system startup, the vault enters a <code>sealed</code> state, which means that communication with the service is not possible. To make effective use of the service, the vault needs to be manually <code>unsealed</code> using a password. It is crucial to keep this password secure as losing it would render the service inaccessible and result in permanent loss of all stored secrets.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>By default, the service comes with a predefined unsealing password, which it attempts to use during startup. However, it is highly recommended to change this password to enhance security. This can be achieved through appropriate API request within the service.</p>
</div>
<h2 id="usage-examples">Usage examples</h2>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Those examples are only for external developers. If you are contributor to the OpenBP project, remember to change imports so they are pointing from the inside of the OpenBP repository.</p>
</div>
<details class="example">
<summary>Encrypt/Decrypt arbitrary data</summary>
<p>In this example we will encrypt and decrypt string using vaults HSM.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">GO</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;bytes&quot;</span>
<span class="w">    </span><span class="s">&quot;context&quot;</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>

<span class="w">    </span><span class="nx">openbp</span><span class="w"> </span><span class="s">&quot;github.com/slamy-solutions/openbp-go&quot;</span>
<span class="w">    </span><span class="s">&quot;github.com/slamy-solutions/openbp-go/modules&quot;</span>
<span class="w">    </span><span class="s">&quot;github.com/slamy-solutions/openbp-go/modules/system&quot;</span>
<span class="w">    </span><span class="s">&quot;github.com/slamy-solutions/openbp-go/modules/system/proto/vault&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">ctx</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">TODO</span><span class="p">()</span>

<span class="w">    </span><span class="nx">obp</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">openbp</span><span class="p">.</span><span class="nx">ConnectToModules</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">modules</span><span class="p">.</span><span class="nx">NewStubConfig</span><span class="p">().</span>
<span class="w">        </span><span class="nx">WithSystemModule</span><span class="p">(</span><span class="nx">system</span><span class="p">.</span><span class="nx">NewSystemStubConfig</span><span class="p">().</span><span class="nx">WithVault</span><span class="p">()),</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">data</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&quot;Hello OpenBP&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="c1">// Encrypt data</span>
<span class="w">    </span><span class="nx">encryptClient</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">obp</span><span class="p">.</span><span class="nx">System</span><span class="p">.</span><span class="nx">Vault</span><span class="p">.</span><span class="nx">EncryptStream</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span>
<span class="w">    </span><span class="nx">encryptClient</span><span class="p">.</span><span class="nx">Send</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">vault</span><span class="p">.</span><span class="nx">EncryptStreamRequest</span><span class="p">{</span>
<span class="w">        </span><span class="nx">PlainData</span><span class="p">:</span><span class="w"> </span><span class="nx">data</span><span class="p">,</span>
<span class="w">    </span><span class="p">})</span>
<span class="w">    </span><span class="nx">encryptClient</span><span class="p">.</span><span class="nx">CloseSend</span><span class="p">()</span>

<span class="w">    </span><span class="nx">encryptResponse</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">encryptClient</span><span class="p">.</span><span class="nx">Recv</span><span class="p">()</span>
<span class="w">    </span><span class="nx">encryptedData</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">encryptResponse</span><span class="p">.</span><span class="nx">EncryptedData</span>

<span class="w">    </span><span class="c1">// Decrypt data</span>
<span class="w">    </span><span class="nx">decryptClient</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">obp</span><span class="p">.</span><span class="nx">System</span><span class="p">.</span><span class="nx">Vault</span><span class="p">.</span><span class="nx">DecryptStream</span><span class="p">(</span><span class="nx">ctx</span><span class="p">)</span>
<span class="w">    </span><span class="nx">decryptClient</span><span class="p">.</span><span class="nx">Send</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">vault</span><span class="p">.</span><span class="nx">DecryptStreamRequest</span><span class="p">{</span>
<span class="w">        </span><span class="nx">EncryptedData</span><span class="p">:</span><span class="w"> </span><span class="nx">encryptedData</span><span class="p">,</span>
<span class="w">    </span><span class="p">})</span>
<span class="w">    </span><span class="nx">decryptClient</span><span class="p">.</span><span class="nx">CloseSend</span><span class="p">()</span>

<span class="w">    </span><span class="nx">decryptResponse</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">decryptClient</span><span class="p">.</span><span class="nx">Recv</span><span class="p">()</span>

<span class="w">    </span><span class="c1">// Compare to original data</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">&quot;Data restored correctly: %t&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">bytes</span><span class="p">.</span><span class="nx">Equal</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span><span class="w"> </span><span class="nx">decryptResponse</span><span class="p">.</span><span class="nx">PlainData</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<details class="example">
<summary>Generate signature (HMAC)</summary>
<p>In this example, we will generate HMAC using vaults HSM</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">GO</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;context&quot;</span>
<span class="w">    </span><span class="s">&quot;encoding/base64&quot;</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>

<span class="w">    </span><span class="nx">openbp</span><span class="w"> </span><span class="s">&quot;github.com/slamy-solutions/openbp-go&quot;</span>
<span class="w">    </span><span class="s">&quot;github.com/slamy-solutions/openbp-go/modules&quot;</span>
<span class="w">    </span><span class="s">&quot;github.com/slamy-solutions/openbp-go/modules/system&quot;</span>
<span class="w">    </span><span class="s">&quot;github.com/slamy-solutions/openbp-go/modules/system/proto/vault&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">ctx</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">TODO</span><span class="p">()</span>

<span class="w">    </span><span class="nx">obp</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">openbp</span><span class="p">.</span><span class="nx">ConnectToModules</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">modules</span><span class="p">.</span><span class="nx">NewStubConfig</span><span class="p">().</span>
<span class="w">        </span><span class="nx">WithSystemModule</span><span class="p">(</span><span class="nx">system</span><span class="p">.</span><span class="nx">NewSystemStubConfig</span><span class="p">().</span><span class="nx">WithVault</span><span class="p">()),</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">data</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&quot;Hello OpenBP&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">obp</span><span class="p">.</span><span class="nx">System</span><span class="p">.</span><span class="nx">Vault</span><span class="p">.</span><span class="nx">HMACSign</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">vault</span><span class="p">.</span><span class="nx">HMACSignRequest</span><span class="p">{</span>
<span class="w">        </span><span class="nx">Data</span><span class="p">:</span><span class="w"> </span><span class="nx">data</span><span class="p">,</span>
<span class="w">    </span><span class="p">})</span>

<span class="w">    </span><span class="nx">signature</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">base64</span><span class="p">.</span><span class="nx">URLEncoding</span><span class="p">.</span><span class="nx">EncodeToString</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">Signature</span><span class="p">)</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;Signature: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">signature</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<details class="example">
<summary>Generate RSA and sign message with it</summary>
<p>In this example, we will sign message with RSA key-pair using vaults HSM</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">GO</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">&quot;context&quot;</span>
<span class="w">    </span><span class="s">&quot;encoding/base64&quot;</span>
<span class="w">    </span><span class="s">&quot;fmt&quot;</span>

<span class="w">    </span><span class="nx">openbp</span><span class="w"> </span><span class="s">&quot;github.com/slamy-solutions/openbp-go&quot;</span>
<span class="w">    </span><span class="s">&quot;github.com/slamy-solutions/openbp-go/modules&quot;</span>
<span class="w">    </span><span class="s">&quot;github.com/slamy-solutions/openbp-go/modules/system&quot;</span>
<span class="w">    </span><span class="s">&quot;github.com/slamy-solutions/openbp-go/modules/system/proto/vault&quot;</span>
<span class="p">)</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">ctx</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">TODO</span><span class="p">()</span>

<span class="w">    </span><span class="nx">obp</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">openbp</span><span class="p">.</span><span class="nx">ConnectToModules</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">modules</span><span class="p">.</span><span class="nx">NewStubConfig</span><span class="p">().</span>
<span class="w">        </span><span class="nx">WithSystemModule</span><span class="p">(</span><span class="nx">system</span><span class="p">.</span><span class="nx">NewSystemStubConfig</span><span class="p">().</span><span class="nx">WithVault</span><span class="p">()),</span>
<span class="w">    </span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nx">keyName</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="s">&quot;my-super-rsa-key-pair&quot;</span>
<span class="w">    </span><span class="nx">data</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="nb">byte</span><span class="p">(</span><span class="s">&quot;Hello OpenBP&quot;</span><span class="p">)</span>

<span class="w">    </span><span class="nx">obp</span><span class="p">.</span><span class="nx">System</span><span class="p">.</span><span class="nx">Vault</span><span class="p">.</span><span class="nx">EnsureRSAKeyPair</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">vault</span><span class="p">.</span><span class="nx">EnsureRSAKeyPairRequest</span><span class="p">{</span>
<span class="w">        </span><span class="nx">KeyName</span><span class="p">:</span><span class="w"> </span><span class="nx">keyName</span><span class="p">,</span>
<span class="w">    </span><span class="p">})</span>

<span class="w">    </span><span class="nx">response</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">obp</span><span class="p">.</span><span class="nx">System</span><span class="p">.</span><span class="nx">Vault</span><span class="p">.</span><span class="nx">RSASign</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">vault</span><span class="p">.</span><span class="nx">RSASignRequest</span><span class="p">{</span>
<span class="w">        </span><span class="nx">KeyName</span><span class="p">:</span><span class="w"> </span><span class="nx">keyName</span><span class="p">,</span>
<span class="w">        </span><span class="nx">Data</span><span class="p">:</span><span class="w">    </span><span class="nx">data</span><span class="p">,</span>
<span class="w">    </span><span class="p">})</span>

<span class="w">    </span><span class="nx">signature</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">base64</span><span class="p">.</span><span class="nx">URLEncoding</span><span class="p">.</span><span class="nx">EncodeToString</span><span class="p">(</span><span class="nx">response</span><span class="p">.</span><span class="nx">Signature</span><span class="p">)</span>
<span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;Signature: &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">signature</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
</div>
</details>
<h2 id="communication-api">Communication API</h2>
<p>The system offers communication capabilities with the service through the gRPC interface. The interface definitions, specified in the proto file, are provided by the <code>system</code> module. This allows clients to interact with the <code>system_vault</code> service seamlessly using gRPC-based communication protocols.</p>
<h3 id="general">General</h3>
<details class="example">
<summary>rpc Seal(SealRequest) returns (SealResponse) {};</summary>
<p>Close and encrypt vault. After sealing, most of the operations will not be accessible.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Request</label><label for="__tabbed_4_2">OK</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>The request doesn't have parameters         </p>
</div>
<div class="tabbed-block">
<p>The response will always be positive, even when the vault is already sealed</p>
</div>
</div>
</div>
</details>
<details class="example">
<summary>rpc Unseal(UnsealRequest) returns (UnsealResponse) {};</summary>
<p>Decrypt and open vault. Must be done before most of the operations with vault secrets.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Request</label><label for="__tabbed_5_2">OK</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>secret</td>
<td>string</td>
<td>Password to decrypt the vault</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Response value</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>success</td>
<td>bool</td>
<td>Indicates if vault was unsealed or not</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</details>
<details class="example">
<summary>rpc UpdateSealSecret(UpdateSealSecretRequest) returns (UpdateSealSecretResponse) {};</summary>
<p>Set up new seal secret and reincrypt vault. The vault must be unsealed before this operation. You don't need to unseal vault after this operation.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:3"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><input id="__tabbed_6_3" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Request</label><label for="__tabbed_6_2">OK</label><label for="__tabbed_6_3">NOT_AUTHORIZED</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>This operation requires you to have administrator access to the HSM. Check PKCS11 spec. If you are using emulated HSM (by default) this will be the same as the seal/unseal secret by default. Change it.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>currentAdminPassword</td>
<td>string</td>
<td>Current administrator password.</td>
<td>"12345678"</td>
</tr>
<tr>
<td>newPassword</td>
<td>string</td>
<td>New administrator password.</td>
<td>-</td>
</tr>
<tr>
<td>newSecret</td>
<td>string</td>
<td>New seal/unseal secret.</td>
<td>-</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>The seal/unseal secret was successfully updated. The administrator password was updated.</p>
</div>
<div class="tabbed-block">
<p>Bad administrator password</p>
</div>
</div>
</div>
</details>
<details class="example">
<summary>rpc GetStatus(GetStatusRequest) returns (GetStatusResponse) {};</summary>
<p>Get current status of the vault.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Request</label><label for="__tabbed_7_2">OK</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>The request doesn't have parameters</p>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Response value</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>sealed</td>
<td>bool</td>
<td>Is vault sealed or not</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</details>
<h3 id="rsa">RSA</h3>
<p>The <code>system_vault</code> service plays a crucial role in securely managing RSA key-pairs. It employs a highly secure approach where the private key is never exposed outside of the Hardware Security Module (HSM) and cannot be extracted from it. On the other hand, the public key, which is intended to be shared and accessible to all, can be retrieved.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>To ensure the utmost security, all operations involving the private key are performed exclusively within the HSM. This means that any cryptographic operations, such as signing or decryption, utilize the private key directly within the HSM's protected environment. This approach significantly reduces the risk of private key compromise or unauthorized access.</p>
</div>
<p>By securely managing RSA key-pairs within the <code>system_vault</code> service and relying on the protection provided by the HSM, the confidentiality and integrity of the private key are maintained while allowing the public key to be widely accessible for encryption, verification, or other public operations.</p>
<details class="example">
<summary>rpc EnsureRSAKeyPair(EnsureRSAKeyPairRequest) returns (EnsureRSAKeyPairResponse) {};</summary>
<p>Create RSA key pair if it doesnt exist. The private key never leaves the HSM.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:3"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><input id="__tabbed_8_3" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">Request</label><label for="__tabbed_8_2">OK</label><label for="__tabbed_8_3">FAILED_PRECONDITION</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>keyName</td>
<td>string</td>
<td>Unique name of the key-pair</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>The key-pair was created or already existed before this operation.</p>
</div>
<div class="tabbed-block">
<p>The vault is sealed.</p>
</div>
</div>
</div>
</details>
<details class="example">
<summary>rpc GetRSAPublicKey(GetRSAPublicKeyRequest) returns (GetRSAPublicKeyResponse) {};</summary>
<p>Get public key of the RSA key-pair.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="9:4"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><input id="__tabbed_9_3" name="__tabbed_9" type="radio" /><input id="__tabbed_9_4" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">Request</label><label for="__tabbed_9_2">OK</label><label for="__tabbed_9_3">NOT_FOUND</label><label for="__tabbed_9_4">FAILED_PRECONDITION</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>keyName</td>
<td>string</td>
<td>Unique name of the key-pair</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Response value</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>publicKey</td>
<td>bytes</td>
<td>Public key in the PKCS #1, ASN.1 DER format</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>Key-pair with provided name doesn't exist</p>
</div>
<div class="tabbed-block">
<p>The vault is sealed.</p>
</div>
</div>
</div>
</details>
<details class="example">
<summary>rpc RSASignStream(stream RSASignStreamRequest) returns (RSASignStreamResponse) {};</summary>
<p>Sign message stream with RSA private key. It will use SHA512_RSA_PKCS (RS512) algorithm to sign the message.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If your data is short (maximum several kilobytes) - use <code>RSASign</code> instead. It will be faster and use less resources.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="10:4"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><input id="__tabbed_10_3" name="__tabbed_10" type="radio" /><input id="__tabbed_10_4" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">Request</label><label for="__tabbed_10_2">OK</label><label for="__tabbed_10_3">NOT_FOUND</label><label for="__tabbed_10_4">FAILED_PRECONDITION</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>keyName</td>
<td>string</td>
<td>Unique name of the key-pair</td>
</tr>
<tr>
<td>data</td>
<td>bytes</td>
<td>Data chunk to sign</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Response value</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>signature</td>
<td>bytes</td>
<td>Signature of the provided data</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>Key-pair with provided name doesn't exist</p>
</div>
<div class="tabbed-block">
<p>The vault is sealed.</p>
</div>
</div>
</div>
</details>
<details class="example">
<summary>rpc RSAVerifyStream(stream RSAVerifyStreamRequest) returns (RSAVerifyStreamResponse) {};</summary>
<p>Validate signature of the message stream using RSA key-pairs public key. It will use SHA512_RSA_PKCS (RS512) algorithm to verify the message.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If your data is short (maximum several kilobytes) - use <code>RSAVerify</code> instead. It will be faster and use less resources.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="11:4"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><input id="__tabbed_11_2" name="__tabbed_11" type="radio" /><input id="__tabbed_11_3" name="__tabbed_11" type="radio" /><input id="__tabbed_11_4" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">Request</label><label for="__tabbed_11_2">OK</label><label for="__tabbed_11_3">NOT_FOUND</label><label for="__tabbed_11_4">FAILED_PRECONDITION</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>keyName</td>
<td>string</td>
<td>Unique name of the key-pair</td>
</tr>
<tr>
<td>data</td>
<td>bytes</td>
<td>Data chunk to validate</td>
</tr>
<tr>
<td>signature</td>
<td>bytes</td>
<td>Signature to validate</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Response value</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>valid</td>
<td>bool</td>
<td>True if and only if provided data and its signature matches provided key-pair</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>Key-pair with provided name doesn't exist</p>
</div>
<div class="tabbed-block">
<p>The vault is sealed.</p>
</div>
</div>
</div>
</details>
<details class="example">
<summary>rpc RSASign(RSASignRequest) returns (RSASignResponse) {};</summary>
<p>Sign message with RSA. It will use SHA512_RSA_PKCS (RS512) algorithm to sign the message.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The data must be short (max several kilobytes). If it is longer - use <code>RSASignStream</code> instead.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="12:4"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><input id="__tabbed_12_2" name="__tabbed_12" type="radio" /><input id="__tabbed_12_3" name="__tabbed_12" type="radio" /><input id="__tabbed_12_4" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="__tabbed_12_1">Request</label><label for="__tabbed_12_2">OK</label><label for="__tabbed_12_3">NOT_FOUND</label><label for="__tabbed_12_4">FAILED_PRECONDITION</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>keyName</td>
<td>string</td>
<td>Unique name of the key-pair</td>
</tr>
<tr>
<td>data</td>
<td>bytes</td>
<td>Data to sign</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Response value</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>signature</td>
<td>bytes</td>
<td>Signature of the provided data</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>Key-pair with provided name doesn't exist</p>
</div>
<div class="tabbed-block">
<p>The vault is sealed.</p>
</div>
</div>
</div>
</details>
<details class="example">
<summary>rpc RSAVerify(RSAVerifyRequest) returns (RSAVerifyResponse) {};</summary>
<p>Validate signature of the message using RSA key-pairs public key. It will use SHA512_RSA_PKCS (RS512) algorithm to verify the message.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The data must be short (max several kilobytes). If it is longer - use <code>RSAVerifyStream</code> instead.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="13:4"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><input id="__tabbed_13_2" name="__tabbed_13" type="radio" /><input id="__tabbed_13_3" name="__tabbed_13" type="radio" /><input id="__tabbed_13_4" name="__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="__tabbed_13_1">Request</label><label for="__tabbed_13_2">OK</label><label for="__tabbed_13_3">NOT_FOUND</label><label for="__tabbed_13_4">FAILED_PRECONDITION</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>keyName</td>
<td>string</td>
<td>Unique name of the key-pair</td>
</tr>
<tr>
<td>data</td>
<td>bytes</td>
<td>Data to validate</td>
</tr>
<tr>
<td>signature</td>
<td>bytes</td>
<td>Signature to validate</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Response value</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>valid</td>
<td>bool</td>
<td>True if and only if provided data and its signature matches provided key-pair</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>Key-pair with provided name doesn't exist</p>
</div>
<div class="tabbed-block">
<p>The vault is sealed.</p>
</div>
</div>
</div>
</details>
<h3 id="hmac">HMAC</h3>
<p>The <code>system_vault</code> service offers the capability to generate HMAC (Hash-based Message Authentication Code) for data. One of the key security measures in this process is that the HMAC secret, which is utilized in generating the HMAC, never leaves the HSM.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>To ensure the utmost security, all operations involving HMAC are performed exclusively within the HSM.</p>
</div>
<details class="example">
<summary>rpc HMACSignStream(stream HMACSignStreamRequest) returns (HMACSignStreamResponse) {};</summary>
<p>Calculate HMAC signature for input data stream. HMAC secret never leaves the HSM (hardware security module). It automatically uses the best available HMAC algorithm for currently used HSM.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If your data is short (maximum several kilobytes) - use <code>HMACSign</code> instead. It will be faster and use less resources.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="14:3"><input checked="checked" id="__tabbed_14_1" name="__tabbed_14" type="radio" /><input id="__tabbed_14_2" name="__tabbed_14" type="radio" /><input id="__tabbed_14_3" name="__tabbed_14" type="radio" /><div class="tabbed-labels"><label for="__tabbed_14_1">Request</label><label for="__tabbed_14_2">OK</label><label for="__tabbed_14_3">FAILED_PRECONDITION</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>data</td>
<td>bytes</td>
<td>Data chunk to sign</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Response value</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>signature</td>
<td>bytes</td>
<td>Signature of the provided data</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>The vault is sealed.</p>
</div>
</div>
</div>
</details>
<details class="example">
<summary>rpc HMACVerifyStream(stream HMACVerifyStreamRequest) returns (HMACVerifyStreamResponse) {};</summary>
<p>Verify HMAC signature of the data stream.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If your data is short (maximum several kilobytes) - use <code>HMACVerify</code> instead. It will be faster and use less resources.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="15:3"><input checked="checked" id="__tabbed_15_1" name="__tabbed_15" type="radio" /><input id="__tabbed_15_2" name="__tabbed_15" type="radio" /><input id="__tabbed_15_3" name="__tabbed_15" type="radio" /><div class="tabbed-labels"><label for="__tabbed_15_1">Request</label><label for="__tabbed_15_2">OK</label><label for="__tabbed_15_3">FAILED_PRECONDITION</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>data</td>
<td>bytes</td>
<td>Data chunk to validate</td>
</tr>
<tr>
<td>signature</td>
<td>bytes</td>
<td>Signature to validate</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Response value</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>valid</td>
<td>bool</td>
<td>True if and only if provided data and its signature matches</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>The vault is sealed.</p>
</div>
</div>
</div>
</details>
<details class="example">
<summary>rpc HMACSign(HMACSignRequest) returns (HMACSignResponse) {};</summary>
<p>Calculate HMAC signature for input data. HMAC secret never leaves the HSM (hardware security module). It automatically uses the best available HMAC algorithm for currently used HSM.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The data must be short (max several kilobytes). If it is longer - use <code>HMACSignStream</code> instead.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="16:3"><input checked="checked" id="__tabbed_16_1" name="__tabbed_16" type="radio" /><input id="__tabbed_16_2" name="__tabbed_16" type="radio" /><input id="__tabbed_16_3" name="__tabbed_16" type="radio" /><div class="tabbed-labels"><label for="__tabbed_16_1">Request</label><label for="__tabbed_16_2">OK</label><label for="__tabbed_16_3">FAILED_PRECONDITION</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>data</td>
<td>bytes</td>
<td>Data to sign</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Response value</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>signature</td>
<td>bytes</td>
<td>Signature of the provided data</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>The vault is sealed.</p>
</div>
</div>
</div>
</details>
<details class="example">
<summary>rpc HMACVerify(HMACVerifyRequest) returns (HMACVerifyResponse) {};</summary>
<p>Verifiy HMAC signature of the data. </p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The data must be short (max several kilobytes). If it is longer - use <code>HMACVerifyStream</code> instead.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="17:3"><input checked="checked" id="__tabbed_17_1" name="__tabbed_17" type="radio" /><input id="__tabbed_17_2" name="__tabbed_17" type="radio" /><input id="__tabbed_17_3" name="__tabbed_17" type="radio" /><div class="tabbed-labels"><label for="__tabbed_17_1">Request</label><label for="__tabbed_17_2">OK</label><label for="__tabbed_17_3">FAILED_PRECONDITION</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>data</td>
<td>bytes</td>
<td>Data to validate</td>
</tr>
<tr>
<td>signature</td>
<td>bytes</td>
<td>Signature to validate</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Response value</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>valid</td>
<td>bool</td>
<td>True if and only if provided data and its signature matches</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>The vault is sealed.</p>
</div>
</div>
</div>
</details>
<h3 id="encryption">Encryption</h3>
<p>The <code>system_vault</code> service includes the capability to encrypt data, adding an extra layer of security to sensitive information. The encryption key used for this process is securely managed and protected within the HSM, safeguarding it from potential threats.</p>
<details class="example">
<summary>rpc HMACSignStream(stream HMACSignStreamRequest) returns (HMACSignStreamResponse) {};</summary>
<p>Encrypt data stream. Encryption secret never leaves the HSM (hardware security module). It automatically uses the best available encryption algorithm for currently used HSM. It will only select the algorithm that is capable of decrypting from the middle of the whole data (partial decryption).</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If your data is short (maximum several kilobytes) - use <code>HMACSign</code> instead. It will be faster and use less resources.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="18:3"><input checked="checked" id="__tabbed_18_1" name="__tabbed_18" type="radio" /><input id="__tabbed_18_2" name="__tabbed_18" type="radio" /><input id="__tabbed_18_3" name="__tabbed_18" type="radio" /><div class="tabbed-labels"><label for="__tabbed_18_1">Request</label><label for="__tabbed_18_2">OK</label><label for="__tabbed_18_3">FAILED_PRECONDITION</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>plainData</td>
<td>bytes</td>
<td>Data chunk to encrypt</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Response value</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>encryptedData</td>
<td>bytes</td>
<td>Encrypted chunk of data</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>The vault is sealed.</p>
</div>
</div>
</div>
</details>
<details class="example">
<summary>rpc HMACVerifyStream(stream HMACVerifyStreamRequest) returns (HMACVerifyStreamResponse) {};</summary>
<p>Decrypt data stream. If you want to decrypt part of the information from the middle of the whole data - ensure, that the first chunk of the data, that you are sending is padded by 2048 bit.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If your data is short (maximum several kilobytes) - use <code>HMACVerify</code> instead. It will be faster and use less resources.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="19:3"><input checked="checked" id="__tabbed_19_1" name="__tabbed_19" type="radio" /><input id="__tabbed_19_2" name="__tabbed_19" type="radio" /><input id="__tabbed_19_3" name="__tabbed_19" type="radio" /><div class="tabbed-labels"><label for="__tabbed_19_1">Request</label><label for="__tabbed_19_2">OK</label><label for="__tabbed_19_3">FAILED_PRECONDITION</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>encryptedData</td>
<td>bytes</td>
<td>Encrypted chunk of the data</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<table>
<thead>
<tr>
<th>Response value</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>plainData</td>
<td>bytes</td>
<td>Decrypted chunk of the data</td>
</tr>
</tbody>
</table>
</div>
<div class="tabbed-block">
<p>The vault is sealed.</p>
</div>
</div>
</div>
</details>
<h2 id="hsm">HSM</h2>
<p>The system_vault service offers the flexibility to work with multiple Hardware Security Module (HSM) providers, allowing users to configure their preferred provider before the initial startup of the system. This capability enables seamless integration with different HSM technologies based on specific requirements or preferences.</p>
<p>To select a particular HSM provider, you can set the <code>HSM_PROVIDER</code> environment variable. The following providers are currently supported:</p>
<ul>
<li><strong><em><code>softhsm2</code></em></strong>: This is the default provider that emulates an HSM using the SoftHSM2 library.</li>
<li><strong><em><code>dynamic</code></em></strong>: This provider offers a dynamic interface, allowing potential connections with various PKCS11 client libraries. It provides flexibility for utilizing different HSM implementations.</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>It is worth mentioning that due to the nature of making secrets non-extractable for security reasons, switching HSM providers at runtime may not be possible. Therefore, it is recommended to configure the desired provider before the initial startup of the system.</p>
</div>
<p>Furthermore, the system is designed to accommodate additional HSM providers in the future. Contributions to expand the range of supported providers are highly appreciated, ensuring ongoing enhancement and versatility in choosing the most suitable HSM solution.</p>
<h3 id="softhsm2">SoftHSM2</h3>
<p>The SoftHSM2 provider does not require any additional configuration. It comes preconfigured with optimal settings that adhere to best practices, alleviating any concerns or need for manual adjustments on your part.</p>
<h3 id="dynamic-hsm-provider">Dynamic HSM provider</h3>
<p>To ensure the proper functioning of the dynamic provider, you need to follow a few steps. First, run OpenBP and it will create a volume for the <code>system_vault</code> service at <code>./data/system/vault/</code>pkcs (depending on what setup you are using). In this folder, copy your PKCS11 library and name it <code>pkcs.so</code>.</p>
<p>Additionally, you need to define the slot by setting the <code>DYNAMIC_PKCS11_SLOT</code> environment variable. This variable specifies the slot that the service should attempt to open when loading the PKCS11 library.</p>
<p>By configuring the environment variable and placing the PKCS11 library in the designated folder, the <code>system_vault</code> service will automatically load the library and try to open the provided slot during its startup process.</p>
<p>Start OpenBP and check the logs. You will receive a message if everything is ok.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        

<!-- Application footer -->
<footer class="md-footer">
  <!-- Further information -->
  <div class="md-footer-meta md-typeset" style="background-color: #fff;">
    <div class="md-footer-meta__inner md-grid" style="background-color: #fff;">

      <!-- Copyright and theme information -->
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight" style="color: rgb(38, 38, 38);">
            Copyright &copy; 2022 Slamy Solutions
          </div>
        
        <div style="color: rgb(38, 38, 38);">
          Made with
          <a
                  href="https://squidfunk.github.io/mkdocs-material/"
                  target="_blank" rel="noopener"
                  style="color: black;"
          >
            Material for MkDocs.
          </a>
          Page design inspired by <a
            href="https://github.com/aws/copilot-cli/"
            target="_blank" rel="noopener"
            style="color: black;"
          >AWS Copilot project</a>
        </div>
      </div>

      <!-- Social links -->
      <div class="md-social">
  
</div>
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["tabs", "instant", "navigation.tabs"], "search": "../../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.b4d07000.min.js"></script>
      
    
  </body>
</html>